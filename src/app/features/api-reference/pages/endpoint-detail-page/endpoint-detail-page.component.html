<!-- endpoint-detail-page.component.html -->
<div class="endpoint-detail" *ngIf="!loading && endpoint">
  <!-- Header -->
  <header class="endpoint-header">
    <div class="endpoint-header__main">
      <app-badge [method]="endpoint.method" variant="method"></app-badge>
      <h1 class="endpoint-header__title">{{ endpoint.name }}</h1>
    </div>
    <p class="endpoint-header__description">{{ endpoint.description }}</p>
  </header>

  <!-- URL -->
  <section class="endpoint-section">
    <h2 class="section-title">Endpoint URL</h2>
    <div class="url-box">
      <app-badge [method]="endpoint.method" variant="method" size="sm"></app-badge>
      <code class="url-box__url">{{ getFullUrl() }}</code>
      <button class="url-box__copy" (click)="copyUrl()" aria-label="Copiar URL">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
      </button>
    </div>
  </section>

  <!-- Headers -->
  <section class="endpoint-section" *ngIf="endpoint.headers && endpoint.headers.length > 0">
    <h2 class="section-title">Headers</h2>
    <div class="params-table">
      <div class="params-table__header">
        <div class="params-table__col">Nombre</div>
        <div class="params-table__col">Valor</div>
        <div class="params-table__col">Requerido</div>
        <div class="params-table__col">Descripción</div>
      </div>
      <div class="params-table__row" *ngFor="let header of endpoint.headers">
        <div class="params-table__col">
          <code>{{ header.name }}</code>
        </div>
        <div class="params-table__col">
          <code class="text-muted">{{ header.value }}</code>
        </div>
        <div class="params-table__col">
          <span class="badge-required" *ngIf="header.required">Sí</span>
          <span class="badge-optional" *ngIf="!header.required">No</span>
        </div>
        <div class="params-table__col">
          <span class="text-muted">{{ header.description || '-' }}</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Request Body -->
  <section class="endpoint-section" *ngIf="endpoint.requestBody">
    <h2 class="section-title">Request Body</h2>
    <p class="section-description">{{ endpoint.requestBody.description }}</p>
    
    <div class="request-body">
      <app-code-block
        [code]="endpoint.requestBody.example | json"
        language="javascript"
        title="Ejemplo de Request Body">
      </app-code-block>
    </div>
  </section>

  <!-- Code Examples -->
  <section class="endpoint-section">
    <h2 class="section-title">Ejemplos de Código</h2>
    
    <!-- Language Tabs -->
    <div class="language-tabs">
      <button
        *ngFor="let example of endpoint.examples"
        class="language-tab"
        [class.active]="selectedLanguage === example.language"
        (click)="selectLanguage(example.language)">
        {{ example.language | uppercase }}
      </button>
    </div>

    <!-- Code Block -->
    <app-code-block
      *ngIf="getSelectedExample()"
      [code]="getSelectedExample()!.code"
      [language]="selectedLanguage"
      [showLineNumbers]="false">
    </app-code-block>
  </section>

  <!-- Responses -->
  <section class="endpoint-section">
    <h2 class="section-title">Respuestas</h2>
    
    <!-- Response Tabs -->
    <div class="response-tabs">
      <button
        *ngFor="let response of endpoint.responses"
        class="response-tab"
        [class.active]="selectedResponseStatus === response.status"
        [class.success]="response.status >= 200 && response.status < 300"
        [class.error]="response.status >= 400"
        (click)="selectResponseStatus(response.status)">
        <span class="response-tab__status">{{ response.status }}</span>
        <span class="response-tab__text">{{ response.statusText }}</span>
      </button>
    </div>

    <!-- Response Content -->
    <div class="response-content" *ngIf="getSelectedResponse()">
      <p class="response-description">{{ getSelectedResponse()!.description }}</p>
      
      <app-code-block
        [code]="getSelectedResponse()!.body | json"
        language="javascript"
        title="Response Body">
      </app-code-block>
    </div>
  </section>
</div>

<!-- Loading State -->
<div class="loading-state" *ngIf="loading">
  <div class="spinner"></div>
  <p>Cargando endpoint...</p>
</div>

<!-- Empty State -->
<div class="empty-state" *ngIf="!loading && !endpoint">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
    <circle cx="12" cy="12" r="10"></circle>
    <line x1="12" y1="8" x2="12" y2="12"></line>
    <line x1="12" y1="16" x2="12.01" y2="16"></line>
  </svg>
  <h3>Endpoint no encontrado</h3>
  <p>No pudimos encontrar el endpoint que buscas.</p>
</div>
