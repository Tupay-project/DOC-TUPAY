<article class="doc-page" role="main" aria-labelledby="security-title">
  <header class="doc-header">
    <div class="doc-header__badge">
      <span class="version-badge">v2.5</span>
      <span class="status-badge status-badge--stable">Estable</span>
    </div>
    <h1 id="security-title">Shield Antifraude</h1>
    <p class="doc-lead">
      Sistema de analisis de fraude en tiempo real que combina Scoring basado en IA,
      motor de reglas de decision y conexion a terceros para proteger las transacciones
      contra ciberdelincuentes.
    </p>
  </header>

  <!-- Metricas Clave -->
  <section class="doc-section" aria-labelledby="metrics">
    <h2 id="metrics">Metricas Clave</h2>
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-card__value">&lt; 50ms</div>
        <div class="metric-card__label">Tiempo de respuesta</div>
      </div>
      <div class="metric-card">
        <div class="metric-card__value">150+</div>
        <div class="metric-card__label">Reglas configurables</div>
      </div>
      <div class="metric-card">
        <div class="metric-card__value">15</div>
        <div class="metric-card__label">Categorias de riesgo</div>
      </div>
      <div class="metric-card">
        <div class="metric-card__value">99.9%</div>
        <div class="metric-card__label">Disponibilidad</div>
      </div>
    </div>
  </section>

  <!-- Seguridad de Nivel Bancario -->
  <section class="doc-section" aria-labelledby="bank-security">
    <h2 id="bank-security">Seguridad de Nivel Bancario</h2>
    <div class="security-features">
      <div class="security-feature">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="security-feature__icon">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
        </svg>
        <div class="security-feature__content">
          <h4>Encriptacion de extremo a extremo</h4>
          <p>Todas las peticiones y respuestas estan encriptadas con TLS 1.3 y certificados actualizados.</p>
        </div>
      </div>
      <div class="security-feature">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="security-feature__icon">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        <div class="security-feature__content">
          <h4>Comunicacion segura</h4>
          <p>Protocolos TLS 1.3 con certificados actualizados y validacion estricta.</p>
        </div>
      </div>
      <div class="security-feature">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="security-feature__icon">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
        </svg>
        <div class="security-feature__content">
          <h4>Reporte automatico</h4>
          <p>Generacion automatica de reportes ROS y CTR a las autoridades competentes (SIB, IVE, UAF).</p>
        </div>
      </div>
      <div class="security-feature">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="security-feature__icon">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <div class="security-feature__content">
          <h4>Cumplimiento AML/CFT</h4>
          <p>Alineado con regulaciones de Guatemala (Decreto 67-2001) y Republica Dominicana (Ley 155-17).</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Capacidades -->
  <section class="doc-section" aria-labelledby="capabilities">
    <h2 id="capabilities">Capacidades del Sistema</h2>
    <div class="feature-grid" role="list">
      <div class="feature-item" role="listitem">
        <div class="feature-icon feature-icon--blue" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
          </svg>
        </div>
        <h3>Analisis en tiempo real</h3>
        <p>Evaluacion de transacciones en menos de 50ms con respuesta instantanea.</p>
      </div>

      <div class="feature-item" role="listitem">
        <div class="feature-icon feature-icon--cyan" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
          </svg>
        </div>
        <h3>Motor de reglas configurable</h3>
        <p>Mas de 150 reglas predefinidas en 15 categorias, personalizables por comercio.</p>
      </div>

      <div class="feature-item" role="listitem">
        <div class="feature-icon feature-icon--purple" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
            <path d="M2 17l10 5 10-5"></path>
            <path d="M2 12l10 5 10-5"></path>
          </svg>
        </div>
        <h3>Scoring inteligente</h3>
        <p>Sistema de puntuacion basado en Machine Learning que aprende de cada transaccion.</p>
      </div>

      <div class="feature-item" role="listitem">
        <div class="feature-icon feature-icon--green" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
        </div>
        <h3>Monitoreo 24/7</h3>
        <p>Supervision continua de transacciones con alertas en tiempo real.</p>
      </div>
    </div>
  </section>

  <!-- Arquitectura -->
  <section class="doc-section" aria-labelledby="architecture">
    <h2 id="architecture">Arquitectura del Sistema</h2>
    <div class="architecture-diagram">
      <pre class="diagram-ascii">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Comercio   â”‚â”€â”€â”€â–¶â”‚   Gateway   â”‚â”€â”€â”€â–¶â”‚           SHIELD API                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                                      â”‚  â”‚        Motor de Analisis        â”‚â”‚
                                      â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
                                      â”‚  â”‚ â”‚Enrichment â”‚ Rules   â”‚Scoringâ”‚ â”‚â”‚
                                      â”‚  â”‚ â”‚  Engine   â”‚ Engine  â”‚Engine â”‚ â”‚â”‚
                                      â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
                                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â–¼                             â–¼                             â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Historico  â”‚              â”‚   Listas    â”‚              â”‚  Terceros   â”‚
                   â”‚  (Profiles) â”‚              â”‚ Black/White â”‚              â”‚   (APIs)    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
    </div>

    <h3>Componentes Principales</h3>
    <table class="doc-table" role="table">
      <thead>
        <tr>
          <th scope="col">Componente</th>
          <th scope="col">Descripcion</th>
          <th scope="col">Tiempo</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>API Gateway</strong></td>
          <td>Autenticacion, rate limiting, validacion de esquemas</td>
          <td>~5ms</td>
        </tr>
        <tr>
          <td><strong>Context Builder</strong></td>
          <td>Enriquecimiento con perfil de usuario e IP intelligence</td>
          <td>~10ms</td>
        </tr>
        <tr>
          <td><strong>Motor de Reglas</strong></td>
          <td>Evaluacion de reglas simples y senales compuestas</td>
          <td>~15ms</td>
        </tr>
        <tr>
          <td><strong>Scoring Engine</strong></td>
          <td>Calculo de score final y determinacion de accion</td>
          <td>~10ms</td>
        </tr>
        <tr>
          <td><strong>Response Handler</strong></td>
          <td>Formateo de respuesta y registro de auditoria</td>
          <td>~5ms</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- Flujos de Validacion -->
  <section class="doc-section" aria-labelledby="flows">
    <h2 id="flows">Flujos de Validacion</h2>
    <p>Shield soporta cuatro flujos de validacion dependiendo del resultado del analisis de riesgo:</p>

    <div class="flow-cards">
      <div class="flow-card flow-card--allow">
        <div class="flow-card__header">
          <span class="flow-card__icon">âœ…</span>
          <h3>ALLOW</h3>
          <span class="flow-card__score">Score: 0-20</span>
        </div>
        <div class="flow-card__body">
          <p><strong>Sin Friccion</strong></p>
          <p>Transaccion aprobada automaticamente. No requiere intervencion del usuario.</p>
          <p class="flow-card__time">Tiempo agregado: &lt; 50ms</p>
        </div>
      </div>

      <div class="flow-card flow-card--stepup">
        <div class="flow-card__header">
          <span class="flow-card__icon">ğŸ”</span>
          <h3>STEP-UP</h3>
          <span class="flow-card__score">Score: 21-50</span>
        </div>
        <div class="flow-card__body">
          <p><strong>Verificacion Adicional</strong></p>
          <p>Requiere OTP por SMS, verificacion por email o validacion biometrica.</p>
          <p class="flow-card__time">Timeout: 5 minutos</p>
        </div>
      </div>

      <div class="flow-card flow-card--hold">
        <div class="flow-card__header">
          <span class="flow-card__icon">â¸ï¸</span>
          <h3>HOLD</h3>
          <span class="flow-card__score">Score: 51-80</span>
        </div>
        <div class="flow-card__body">
          <p><strong>Revision Manual</strong></p>
          <p>Transaccion retenida para revision por analista de fraude.</p>
          <p class="flow-card__time">SLA: 4 horas</p>
        </div>
      </div>

      <div class="flow-card flow-card--block">
        <div class="flow-card__header">
          <span class="flow-card__icon">ğŸš«</span>
          <h3>BLOCK</h3>
          <span class="flow-card__score">Score: 81-100</span>
        </div>
        <div class="flow-card__body">
          <p><strong>Rechazo Inmediato</strong></p>
          <p>Transaccion bloqueada automaticamente por alto riesgo.</p>
          <p class="flow-card__time">Registro en lista gris</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Integraciones Externas -->
  <section class="doc-section" aria-labelledby="integrations">
    <h2 id="integrations">Integraciones Externas</h2>
    <table class="doc-table" role="table">
      <thead>
        <tr>
          <th scope="col">Servicio</th>
          <th scope="col">Tipo</th>
          <th scope="col">Proposito</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>MaxMind GeoIP2</td>
          <td>IP Intelligence</td>
          <td>Geolocalizacion y deteccion de proxies/VPN</td>
        </tr>
        <tr>
          <td>Device Fingerprint</td>
          <td>Device Intelligence</td>
          <td>Identificacion de dispositivos y emuladores</td>
        </tr>
        <tr>
          <td>Email Reputation</td>
          <td>Identity Verification</td>
          <td>Validacion de emails y deteccion de temporales</td>
        </tr>
        <tr>
          <td>Bureaus de Credito</td>
          <td>Risk Assessment</td>
          <td>Validacion contra centrales de riesgo</td>
        </tr>
        <tr>
          <td>Listas OFAC/ONU</td>
          <td>Compliance</td>
          <td>Verificacion contra listas de sanciones</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- Quick Start -->
  <section class="doc-section" aria-labelledby="quickstart">
    <h2 id="quickstart">Quick Start</h2>
    <p>Valida tu primera transaccion con Shield Antifraude:</p>

    <div class="steps-vertical">
      <div class="step-vertical">
        <div class="step-vertical__number">1</div>
        <div class="step-vertical__content">
          <h3>Envia la peticion de validacion</h3>
          <app-code-block
            [code]="validateRequestExample"
            language="curl"
            title="POST /validate">
          </app-code-block>
        </div>
      </div>

      <div class="step-vertical">
        <div class="step-vertical__number">2</div>
        <div class="step-vertical__content">
          <h3>Procesa la respuesta</h3>
          <app-code-block
            [code]="validateResponseExample"
            language="json"
            title="Respuesta exitosa">
          </app-code-block>
        </div>
      </div>

      <div class="step-vertical">
        <div class="step-vertical__number">3</div>
        <div class="step-vertical__content">
          <h3>Actua segun la decision</h3>
          <ul>
            <li><strong>ALLOW:</strong> Continua con el procesamiento del pago</li>
            <li><strong>STEP_UP:</strong> Solicita verificacion adicional al usuario</li>
            <li><strong>HOLD:</strong> Muestra mensaje de "En revision"</li>
            <li><strong>BLOCK:</strong> Muestra mensaje de "Rechazado"</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Mercados Soportados -->
  <section class="doc-section" aria-labelledby="markets">
    <h2 id="markets">Mercados Soportados</h2>
    <table class="doc-table" role="table">
      <thead>
        <tr>
          <th scope="col">Pais</th>
          <th scope="col">Regulacion</th>
          <th scope="col">Estado</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Guatemala</td>
          <td>SIB / IVE</td>
          <td><span class="status-pill status-pill--active">Activo</span></td>
        </tr>
        <tr>
          <td>Republica Dominicana</td>
          <td>SB / UAF</td>
          <td><span class="status-pill status-pill--active">Activo</span></td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- Preguntas Frecuentes -->
  <section class="doc-section" aria-labelledby="faq">
    <h2 id="faq">Preguntas Frecuentes</h2>

    <div class="faq-list">
      <div class="faq-item">
        <h3>Â¿Por que se bloqueo mi transaccion?</h3>
        <p>
          Las transacciones se bloquean cuando el puntaje de riesgo supera 80 puntos. Esto puede
          ocurrir por multiples factores como: IP sospechosa, dispositivo no reconocido, patron
          de transacciones inusual, o coincidencia con listas de alerta. Contacta a soporte para
          revision de casos especificos.
        </p>
      </div>

      <div class="faq-item">
        <h3>Â¿Por que me piden verificacion adicional?</h3>
        <p>
          Cuando detectamos algo inusual pero no claramente fraudulento (puntaje 21-50), solicitamos
          verificacion adicional como codigo SMS, email o biometrico. Esto protege tu cuenta y
          confirma que realmente eres tu quien realiza la operacion.
        </p>
      </div>

      <div class="faq-item">
        <h3>Â¿Cuanto tiempo tarda la revision manual?</h3>
        <p>
          Las transacciones en estado HOLD (revision manual) tienen un SLA maximo de 4 horas en
          horario laboral. Nuestro equipo de cumplimiento revisa la documentacion y el contexto
          para tomar una decision.
        </p>
      </div>

      <div class="faq-item">
        <h3>Â¿Mis datos estan seguros?</h3>
        <p>
          Si. Toda la informacion se transmite con encriptacion de extremo a extremo (TLS 1.3).
          Los datos sensibles se almacenan encriptados y solo personal autorizado puede acceder
          a ellos bajo estrictos controles de auditoria.
        </p>
      </div>

      <div class="faq-item">
        <h3>Â¿Por que necesitan tanta informacion para payouts?</h3>
        <p>
          Las regulaciones AML/CFT de Guatemala y Republica Dominicana requieren verificacion
          plena de identidad para transferencias de dinero. Esto nos permite identificar y
          prevenir lavado de dinero, financiamiento del terrorismo y otras actividades ilicitas.
        </p>
      </div>

      <div class="faq-item">
        <h3>Â¿Que pasa si mi transaccion es reportada?</h3>
        <p>
          Las transacciones que activan ciertas reglas criticas generan reportes automaticos a
          las autoridades (SIB, IVE, UAF segun el pais). Estos reportes son confidenciales y
          forman parte de nuestras obligaciones legales como entidad regulada.
        </p>
      </div>

      <div class="faq-item">
        <h3>Â¿Puedo apelar una decision de bloqueo?</h3>
        <p>
          Si. Puedes contactar a <strong>soporte&#64;tupay.finance</strong> con los detalles de
          la transaccion. Nuestro equipo revisara el caso y, si corresponde, desbloqueara la
          operacion o te indicara que documentacion adicional se requiere.
        </p>
      </div>
    </div>
  </section>

  <!-- Contacto y Soporte -->
  <section class="doc-section" aria-labelledby="support">
    <h2 id="support">Contacto y Soporte</h2>
    <div class="support-grid">
      <div class="support-card">
        <div class="support-card__icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
        </div>
        <h4>Soporte General</h4>
        <p>soporte&#64;tupay.finance</p>
      </div>

      <div class="support-card">
        <div class="support-card__icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
          </svg>
        </div>
        <h4>Cumplimiento</h4>
        <p>cumplimiento&#64;tupay.finance</p>
      </div>

      <div class="support-card">
        <div class="support-card__icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </div>
        <h4>Horario</h4>
        <p>Lun - Vie, 8:00 AM - 6:00 PM (GMT-6)</p>
      </div>

      <div class="support-card">
        <div class="support-card__icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
        </div>
        <h4>Estado del Servicio</h4>
        <p>status.tupay.finance</p>
      </div>
    </div>
  </section>

  <!-- Proximos Pasos -->
  <section class="doc-section" aria-labelledby="next-steps">
    <h2 id="next-steps">Proximos Pasos</h2>
    <nav class="next-steps" aria-label="Navegacion a proximas secciones">
      <a routerLink="/security/rules" class="next-step-card">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
          <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
        </svg>
        <div>
          <h4>Motor de Reglas</h4>
          <p>Catalogo completo de 150+ reglas en 15 categorias</p>
        </div>
      </a>

      <a routerLink="/security/scoring" class="next-step-card">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
          <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
          <path d="M2 17l10 5 10-5"></path>
          <path d="M2 12l10 5 10-5"></path>
        </svg>
        <div>
          <h4>Sistema de Scoring</h4>
          <p>Formula de calculo y matriz de decisiones</p>
        </div>
      </a>

      <a routerLink="/security/api" class="next-step-card">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
          <polyline points="16 18 22 12 16 6"></polyline>
          <polyline points="8 6 2 12 8 18"></polyline>
        </svg>
        <div>
          <h4>Referencia de API</h4>
          <p>Endpoints, autenticacion y codigos de error</p>
        </div>
      </a>
    </nav>
  </section>
</article>
