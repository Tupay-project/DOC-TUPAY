<!-- navbar.component.html -->
<nav class="navbar">
  <div class="navbar__container">
    <!-- Logo y Marca -->
    <div class="navbar__brand">
      <button 
        class="navbar__menu-btn hide-desktop" 
        (click)="toggleMobileMenu()"
        aria-label="Toggle menu">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>

      <a routerLink="/" class="navbar__logo">
        <svg class="navbar__logo-icon" viewBox="0 0 100 40" xmlns="http://www.w3.org/2000/svg">
          <!-- Logo TuPay simplificado -->
          <text x="5" y="28" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1E6FE8">TU</text>
          <rect x="45" y="8" width="50" height="24" rx="4" fill="#00C7E6"/>
          <text x="52" y="26" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">PAY</text>
        </svg>
        <span class="navbar__title">Finance API</span>
      </a>
    </div>

    <!-- Navegación Central -->
    <div class="navbar__nav hide-mobile">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="navbar__link">
        Inicio
      </a>
      <a routerLink="/gateway" routerLinkActive="active" class="navbar__link">
        Documentación
      </a>
      <a [routerLink]="['/', currentCountry.code.toLowerCase(), 'api']" routerLinkActive="active" class="navbar__link">
        API Reference
      </a>
    </div>

    <!-- Acciones -->
    <div class="navbar__actions">
      <!-- Búsqueda -->
      <button 
        class="navbar__action-btn navbar__search-btn"
        (click)="onSearchClick()"
        aria-label="Buscar">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
        <span class="navbar__search-text hide-mobile">Buscar</span>
        <kbd class="navbar__kbd hide-mobile">Ctrl K</kbd>
      </button>

      <!-- Selector de País -->
      <div class="navbar__country-selector">
        <button 
          class="navbar__country-btn"
          (click)="toggleCountryDropdown()"
          [class.active]="showCountryDropdown">
          <span class="navbar__country-flag">{{ currentCountry.flag }}</span>
          <span class="navbar__country-name hide-mobile">{{ currentCountry.name }}</span>
          <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </button>

        <!-- Dropdown -->
        <div class="navbar__dropdown" *ngIf="showCountryDropdown">
          <button 
            *ngFor="let country of countries"
            class="navbar__dropdown-item"
            [class.active]="country.code === currentCountry.code"
            (click)="selectCountry(country)">
            <span class="navbar__country-flag">{{ country.flag }}</span>
            <div class="navbar__dropdown-content">
              <span class="navbar__dropdown-title">{{ country.name }}</span>
              <span class="navbar__dropdown-subtitle">{{ country.currency }}</span>
            </div>
            <svg *ngIf="country.code === currentCountry.code" class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
          </button>
        </div>
      </div>

      <!-- Toggle Dark Mode -->
      <button 
        class="navbar__action-btn"
        (click)="toggleTheme()"
        [attr.aria-label]="(isDarkMode$ | async) ? 'Activar modo claro' : 'Activar modo oscuro'">
        <svg *ngIf="!(isDarkMode$ | async)" class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg *ngIf="isDarkMode$ | async" class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
      </button>
    </div>
  </div>
</nav>
